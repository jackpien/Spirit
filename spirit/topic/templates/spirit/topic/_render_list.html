{% load spirit_tags i18n %}

{# topic list #}
<div class="container-fluid" style="padding-top:2%;">
  <div class="row">
    <div class="col-xs-12">
      <div class="list-group">
        {% for t in topics %}
        <li class="list-group-item" style="overflow:hidden;">
          <div class="row-title" style="float:left; width:50%; display:block; margin:0;">
            {% if t.is_pinned or t.is_globally_pinned %}
            <span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span>
            {% endif %}
            {% if t.is_closed %}
            <span class="glyphicon glyphicon-lock" aria-hidden="true"></span>
            {% endif %}
            <a class="row-link{% if t.is_visited %} is-visited{% endif %}" href="{{ t.get_bookmark_url }}">{{ t.title }}</a>
          </div>

          <div class="row-info" style="float:left; width:50%; display:block; text-align:right; margin:0;">
            <div>
              {% if show_subcategory %}
              <a {% if t.category.color %}style="color: {{ t.category.color }};"{% endif %} href="{{ t.category.get_absolute_url }}">
                 {{ t.category.title }}
              </a>
              {% else %}
                {% if t.category.parent %}
                <a {% if t.category.parent.color %}style="color: {{ t.category.parent.color }};"{% endif %} href="{{ t.category.parent.get_absolute_url }}">
                  {{ t.category.parent.title }}
                </a>
                {% else %}
                <a {% if t.category.color %}style="color: {{ t.category.color }};"{% endif %} href="{{ t.category.get_absolute_url }}">
                  {{ t.category.title }}
                </a>
                {% endif %}
              {% endif %}
            </div>
            <div><span class="glyphicon glyphicon-comment {% if t.has_new_comments %} js-comment-is-new{% endif %}" aria-hidden="true"></span> {{ t.comment_count }}</div>
            <div title="{{ t.last_active }}"><span class="glyphicon glyphicon-time" aria-hidden="true"></span>{{ t.last_active|shortnaturaltime }}</div>
          </div>
        </li>
        {% empty %}
        <h4>{% trans "There are no topics here, yet" %}</h4>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
    $(document).ready(function() {
        // .is_new depends on js (bookmarks)
        $('.js-comment-is-new').addClass('is-new');
    });
</script>
